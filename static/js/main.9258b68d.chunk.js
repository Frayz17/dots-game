(this["webpackJsonpdots-game"]=this["webpackJsonpdots-game"]||[]).push([[0],{109:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c),l=a(152),o=a(154),u=a(155),s=a(60),m=Object(s.a)((function(e){return{toolBar:{justifyContent:"center",textTransform:"uppercase"}}})),d=r.a.memo((function(){var e=m();return r.a.createElement(l.a,{position:"static"},r.a.createElement(o.a,{className:e.toolBar},r.a.createElement(u.a,{variant:"h5"},"Dots Game")))})),f=a(6),p=a(18),E=a(157),g=Object(s.a)((function(e){return Object(f.a)({btnSubmit:{width:120}},e.breakpoints.down("xs"),{btnSubmit:{width:250,marginTop:15}})})),y="start",S=a(66),b=a(156),h=Object(S.a)({palette:{secondary:{main:"#ad1457"}}}),_=Object(p.b)((function(e){return{gameStartFlag:e.gameStartFlag}}))(r.a.memo((function(e){var t=e.gameStartFlag,a=e.isSubmitEnabled,n=g(),c="play",i="primary";return t!==y&&"stop"!==t||(c="play again",i="secondary"),r.a.createElement(b.a,{theme:h},r.a.createElement(E.a,{className:n.btnSubmit,type:"submit",variant:"contained",color:i,disabled:!a},c))}))),v=a(13);var T=function(e){return 0===Object.entries(e).length&&e.constructor===Object};function O(e){return e<10&&(e="0"+e),e}var R=function(){var e=new Date,t=new Intl.DateTimeFormat("en-US",{month:"long"}).format(e);return O(e.getHours())+":"+O(e.getMinutes())+"; "+O(e.getDate())+" "+t+" "+e.getFullYear()},A=a(11),w=a(38),L=a(62),N=null,j=function(){return N},C=function(){return N.getState()},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dificultiesList:{},dificultySelected:{field:10,delay:1e3,name:"normalMode"}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_DIFICULTY_LIST_SET":return Object(A.a)({},e,{dificultiesList:Object(A.a)({},t.payload)});case"GAME_DIFICULTY_CHOOSE":return Object(A.a)({},e,{dificultySelected:t.payload});default:return Object(A.a)({},e)}},F=function(){j().dispatch({type:"GAME_START_SET_STOP"})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"notstarted",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_START_SET_START":return y;case"GAME_START_SET_STOP":return"stop";case"GAME_START_FLAG_RESET":return"notstarted";default:return e}},x=function(){var e=C().player.timeStartPlay,t=C().player.timeEndPlay;t>e&&j().dispatch({type:"PLAYER_SET_TIME_SCORE",payload:t-e})},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",winnerFlag:null,timeStartPlay:0,timeEndPlay:0,timeScore:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAYER_NAME_SET":return Object(A.a)({},e,{name:t.payload});case"PLAYER_SET_WINNER_FLAG_TRUE":return Object(A.a)({},e,{winnerFlag:!0});case"PLAYER_SET_WINNER_FLAG_FALSE":return Object(A.a)({},e,{winnerFlag:!1});case"PLAYER_SET_TIME_START_PLAY":return Object(A.a)({},e,{timeStartPlay:(new Date).getTime()});case"PLAYER_SET_TIME_END_PLAY":return Object(A.a)({},e,{timeEndPlay:(new Date).getTime()});case"PLAYER_SET_TIME_SCORE":return Object(A.a)({},e,{timeScore:t.payload});case"PLAYER_RESET_GAME":return Object(A.a)({},e,{winnerFlag:null,timeStartPlay:0,timeEndPlay:0,timeScore:null});case"PLAYER_RESET_ALL":return{name:"",winnerFlag:null,timeStartPlay:0,timeEndPlay:0,timeScore:null};default:return Object(A.a)({},e)}},M=function(){j().dispatch({type:"BOARD_FIELD_COUNTER_INCREMENT"})},Y=function(e){j().dispatch({type:"SET_BOARD_FIELDS",payload:e})},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fields:[],fieldCounter:0,playerScore:0,pcScore:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARD_FIELDS":return Object(A.a)({},e,{fields:t.payload});case"BOARD_FIELD_COUNTER_INCREMENT":return Object(A.a)({},e,{fieldCounter:e.fieldCounter+1});case"BOARD_PLAYER_SCORE_INCREMENT":return Object(A.a)({},e,{playerScore:e.playerScore+1});case"BOARD_PC_SCORE_INCREMENT":return Object(A.a)({},e,{pcScore:e.pcScore+1});case"BOARD_RESET":return{fields:[],fieldCounter:0,playerScore:0,pcScore:0};default:return Object(A.a)({},e)}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WINNERS_LIST_SET_LIST":return t.payload;default:return e}},G=function(e){var t,a=C().gameStartFlag,n=C().gameDificulty.dificultiesList,r=e.target.value,c=Object(A.a)({},n[e.target.value],{name:r});"notstarted"===a&&(t=c,j().dispatch({type:"GAME_DIFICULTY_CHOOSE",payload:t}))},W=a(14),U=a.n(W),H=a(34),q=a.n(H),J=function(e){var t;"notstarted"===C().gameStartFlag&&(t=e.target.value,j().dispatch({type:"PLAYER_NAME_SET",payload:t}))},$=function(e){return function(t){t.preventDefault();var a=C().gameStartFlag;e&&j().dispatch({type:"GAME_START_SET_START"}),a!==y&&"stop"!==a||(j().dispatch({type:"GAME_START_FLAG_RESET"}),j().dispatch({type:"BOARD_RESET"}),j().dispatch({type:"PLAYER_RESET_GAME"}))}},z=a(162),Z=a(117),K=a(163),Q=a(120),V=a(113),X=a(116),ee=a(158),te=Object(s.a)((function(e){return Object(f.a)({form:{display:"flex",alignItems:"center",justifyContent:"center"},formControl:{margin:e.spacing(1)},selectDificulty:{width:180},playerNameInput:{width:180}},e.breakpoints.down("xs"),{form:{flexDirection:"column",alignItems:"center"},selectDificulty:{width:250},playerNameInput:{width:250}})})),ae=Object(p.b)((function(e){return{gameDificulty:e.gameDificulty,player:e.player,gameStartFlag:e.gameStartFlag}}))(r.a.memo((function(e){var t=e.gameDificulty,a=t.dificultiesList,n=t.dificultySelected,c=e.player,i=e.gameStartFlag,l=te(),o=c.name.length>3&&""!==n&&!T(n),u="notstarted"!==i;r.a.useEffect((function(){!function(e){var t;U.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.awrap(q()("https://starnavi-frontend-test-task.herokuapp.com/game-settings"));case 3:t=e.sent,a=t.data,j().dispatch({type:"GAME_DIFICULTY_LIST_SET",payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}var a}),null,null,[[0,7]])}()}),[]);var s=Object.keys(a);return r.a.createElement(z.a,null,T(a)?null:r.a.createElement("form",{className:l.form,onSubmit:$(o)},r.a.createElement(V.a,{disabled:u,required:!0,className:l.formControl},r.a.createElement(Q.a,{id:"dificulty-select-label"},"Select Dificulty"),r.a.createElement(Z.a,{labelId:"dificulty-select-label",id:"dificulty-select",className:l.selectDificulty,value:n.name,onChange:G},s.map((function(e){return r.a.createElement(K.a,{key:e,value:e},(t=e).charAt(0).toUpperCase()+t.substring(1).replace(/([a-z])([A-Z])/,"$1 $2"));var t}))),r.a.createElement(X.a,null,"choose dificulty")),r.a.createElement(ee.a,{className:l.playerNameInput,label:"Player Name",onChange:J,value:c.name,required:!0,disabled:u,helperText:"must be at least 4 characters",inputProps:{minLength:4,maxLength:20}}),r.a.createElement(V.a,{className:l.formControl},r.a.createElement(_,{isSubmitEnabled:o}))))}))),ne=Object(s.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:30,marginBottom:30},text:{}}})),re=Object(p.b)((function(e){return{gameStartFlag:e.gameStartFlag,winnerFlag:e.player.winnerFlag}}))(r.a.memo((function(e){var t=e.gameStartFlag,a=e.winnerFlag,n=ne(),c=C().player.name,i="",l="";switch(!0===a?l="Player ".concat(c," is winner!"):!1===a&&(l="Player ".concat(c," loose.")),t){case"notstarted":i="Welcome to our Game!";break;case y:i="Press on blue squares.";break;case"stop":i=l;break;default:i=""}return r.a.createElement(z.a,{className:n.root},r.a.createElement(u.a,{className:n.text,variant:"h5"},i))}))),ce=function(e,t){var a=C().board.fields.map((function(a){return a.id===e&&"success"!==a.status&&(a.status=t),a}));Y(a)},ie=function(){for(var e=C().gameDificulty.dificultySelected.field,t=e*e,a=[],n=0;n<t;n++)a.push({id:n,status:"inactive",catch:null});Y(function(e){for(var t=Object(v.a)(e),a=t.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),r=[t[n],t[a]];t[a]=r[0],t[n]=r[1]}return t}(a))},le=function(e){return function(){var t=C().board,a=t.fieldCounter,n=t.fields,r=C().gameStartFlag;if(a===e&&r===y){var c=n.map((function(t){return t.id===e&&(t.status="success"),t}));Y(c),M(),j().dispatch({type:"BOARD_PLAYER_SCORE_INCREMENT"})}}},oe=a(21),ue=a.n(oe),se=Object(s.a)((function(e){return{td:{borderLeft:"1px solid ".concat(ue.a[700]),borderTop:"1px solid ".concat(ue.a[700])}}})),me=a(63),de=a.n(me),fe=a(64),pe=a.n(fe),Ee=a(65),ge=a.n(Ee);function ye(e){var t=e.id,a=e.status,n=se();return r.a.createElement(z.a,{style:{backgroundColor:function(){switch(a){case"active":return de.a[500];case"success":return pe.a[500];case"fail":return ge.a[500];case"inactive":default:return"white"}}()},className:n.td,onClick:le(t)})}var Se=function(){var e;return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U.a.awrap(q()("https://starnavi-frontend-test-task.herokuapp.com/winners"));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),console.error("error",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])},be=function(){var e;return U.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.a.awrap(Se());case 2:(e=t.sent).reverse(),a=e,j().dispatch({type:"WINNERS_LIST_SET_LIST",payload:a});case 5:case"end":return t.stop()}var a}))},he=function(e,t){return U.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,U.a.awrap(q.a.post("https://starnavi-frontend-test-task.herokuapp.com/winners",{winner:e,date:t}));case 3:be(),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log("cant send data to server ",a.t0);case 9:case"end":return a.stop()}}),null,null,[[0,6]])},_e=function(){var e,t,a,n;return U.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e=C().player,t=e.name,a=e.winnerFlag,n=R(),!0===a&&he(t,n),!1===a&&he("Computer",n);case 4:case"end":return r.stop()}}))},ve=function(){F(),j().dispatch({type:"PLAYER_SET_TIME_END_PLAY"}),j().dispatch({type:"PLAYER_SET_WINNER_FLAG_TRUE"}),x(),_e()},Te=function(){F(),j().dispatch({type:"PLAYER_SET_WINNER_FLAG_FALSE"}),_e()},Oe=Object(p.b)((function(e){return{dificultySelected:e.gameDificulty.dificultySelected,gameStartFlag:e.gameStartFlag,fields:e.board.fields,fieldCounter:e.board.fieldCounter}}))((function(e){var t=e.gameStartFlag,a=e.fields,n=e.fieldCounter,c=function(){var e=C().gameDificulty.dificultySelected.field;return Object(s.a)((function(t){return{root:{margin:"auto",width:450,height:450},board:{display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),justifyContent:"center",gridTemplateRows:"repeat(".concat(e,", ").concat(450/e,"px)"),alignItems:"stretch",borderBottom:"1px solid ".concat(ue.a[700]),borderRight:"1px solid ".concat(ue.a[700])},"@media (max-width: 490px)":{root:{width:360,height:360},board:{gridTemplateRows:"repeat(".concat(e,", ").concat(360/e,"px)")}}}}))}()(),i=C().gameDificulty.dificultySelected,l=C().board,o=l.playerScore,u=l.pcScore,m=C().player.timeScore,d=a.length,f=i.delay;r.a.useEffect((function(){T(i)||"notstarted"!==t||ie()}),[i,t]),r.a.useEffect((function(){t===y&&j().dispatch({type:"PLAYER_SET_TIME_START_PLAY"})}),[t]),r.a.useEffect((function(){var e,a=Math.ceil(d/2);return t===y&&(o>a&&a>0?ve():u>a&&a>0?(Te(),ce(n,"inactive")):n<=d&&(ce(n,"active"),e=setInterval((function(){ce(n,"fail"),M(),j().dispatch({type:"BOARD_PC_SCORE_INCREMENT"})}),f||2e3))),function(){clearInterval(e)}}),[f,n,d,t,u,o,m]);for(var p=[],E=0;E<a.length;E++)p.push(r.a.createElement(ye,{key:a[E].id,id:a[E].id,status:a[E].status,fieldCounter:n}));return r.a.createElement(z.a,{className:c.root},r.a.createElement(z.a,{className:c.board},p))})),Re=Object(s.a)((function(e){return Object(f.a)({},e.breakpoints.down("md"),{root:{marginBottom:20}})}));var Ae=function(){var e=Re();return r.a.createElement(z.a,{className:e.root},r.a.createElement(ae,null),r.a.createElement(re,null),r.a.createElement(Oe,null))},we=Object(s.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid ".concat(ue.a[300]),marginTop:10}}})),Le=r.a.memo((function(e){var t=e.name,a=e.date,n=we();return r.a.createElement(z.a,{className:n.root},r.a.createElement(u.a,{variant:"subtitle2"},t),r.a.createElement(u.a,{variant:"subtitle2"},a))})),Ne=Object(s.a)((function(e){return Object(f.a)({root:{},title:{textAlign:"center",marginBottom:15},listWrapper:{overflowY:"auto",height:500,maxWidth:500,margin:"0 auto",paddingRight:10}},e.breakpoints.down("sm"),{listWrapper:{height:200}})})),je=Object(p.b)((function(e){return{gameStartFlag:e.gameStartFlag,winnersList:e.winnersList}}))(r.a.memo((function(e){var t=e.gameStartFlag,a=e.winnersList,n=Ne();return r.a.useEffect((function(){be()}),[t]),r.a.createElement(z.a,{className:n.root},r.a.createElement(u.a,{className:n.title,variant:"h4"},"Winners Board"),r.a.createElement(z.a,{className:n.listWrapper},a.map((function(e){return r.a.createElement(Le,{key:e.id,name:e.winner,date:e.date})}))))}))),Ce=Object(s.a)((function(e){return{root:{margin:15}}})),Ie=r.a.memo((function(){var e=Ce();return r.a.createElement(z.a,{className:e.root},r.a.createElement(je,null))})),Fe=a(159),De=a(160),xe=Object(s.a)((function(e){return{root:{height:"100%",paddingTop:20,paddingBottom:20}}}));var Pe=function(){var e=xe();return r.a.createElement(Fe.a,{className:e.root},r.a.createElement(De.a,{container:!0},r.a.createElement(De.a,{item:!0,xs:12,md:8},r.a.createElement(Ae,null)),r.a.createElement(De.a,{item:!0,xs:12,md:4},r.a.createElement(Ie,null))))},Me=Object(s.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:36,backgroundColor:ue.a[300]},toolBar:{justifyContent:"center",textTransform:"uppercase"}}})),Ye=r.a.memo((function(){var e=Me(),t=(new Date).getFullYear();return r.a.createElement(z.a,{className:e.root},r.a.createElement(u.a,{variant:"subtitle1"},"\xa9",t))})),ke=a(161),Be=(a(109),Object(s.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"},gameWrapper:{flexGrow:1}}})));a(110);var Ge=function(){var e=Be();return r.a.createElement(z.a,{className:e.root},r.a.createElement(ke.a,null),r.a.createElement(d,null),r.a.createElement(z.a,{className:e.gameWrapper},r.a.createElement(Pe,null)),r.a.createElement(Ye,null))};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=Object(w.c)(e),n=Object(w.a)(L.a,t||function(e){return function(e){return function(t){return e(t)}}});N=Object(w.d)(a,void 0,n)}({gameDificulty:I,gameStartFlag:D,player:P,board:k,winnersList:B}),i.a.render(r.a.createElement((function(e){var t=e.children;return r.a.createElement(p.a,{store:j()},t)}),null,r.a.createElement(Ge,null)),document.getElementById("root"))},80:function(e,t,a){e.exports=a(111)}},[[80,1,2]]]);
//# sourceMappingURL=main.9258b68d.chunk.js.map