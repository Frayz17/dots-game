(this["webpackJsonpdots-game"]=this["webpackJsonpdots-game"]||[]).push([[0],{109:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),i=a.n(c),l=a(152),o=a(154),u=a(155),s=a(60),m=Object(s.a)((function(e){return{toolBar:{justifyContent:"center",textTransform:"uppercase"}}})),d=r.a.memo((function(){var e=m();return r.a.createElement(l.a,{position:"static"},r.a.createElement(o.a,{className:e.toolBar},r.a.createElement(u.a,{variant:"h5"},"Dots Game")))})),f=a(18),p=a(157),E=Object(s.a)((function(e){return{btnSubmit:{width:120},"@media (max-width: 599px)":{btnSubmit:{width:250,marginTop:15}}}})),g="start",y=a(66),S=a(156),h=Object(y.a)({palette:{secondary:{main:"#ad1457"}}}),_=Object(f.b)((function(e){return{gameStartFlag:e.gameStartFlag}}))(r.a.memo((function(e){var t=e.gameStartFlag,a=e.isSubmitEnabled,n=E(),c="play",i="primary";return t!==g&&"stop"!==t||(c="play again",i="secondary"),r.a.createElement(S.a,{theme:h},r.a.createElement(p.a,{className:n.btnSubmit,type:"submit",variant:"contained",color:i,disabled:!a},c))}))),v=a(13);var b=function(e){return 0===Object.entries(e).length&&e.constructor===Object};function T(e){return e<10&&(e="0"+e),e}var R=function(){var e=new Date,t=new Intl.DateTimeFormat("en-US",{month:"long"}).format(e);return T(e.getHours())+":"+T(e.getMinutes())+"; "+T(e.getDate())+" "+t+" "+e.getFullYear()},A=a(11),O=a(38),w=a(62),L=null,N=function(){return L},j=function(){return L.getState()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dificultiesList:{},dificultySelected:{field:10,delay:1e3,name:"normalMode"}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_DIFICULTY_LIST_SET":return Object(A.a)({},e,{dificultiesList:Object(A.a)({},t.payload)});case"GAME_DIFICULTY_CHOOSE":return Object(A.a)({},e,{dificultySelected:t.payload});default:return Object(A.a)({},e)}},I=function(){N().dispatch({type:"GAME_START_SET_STOP"})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"notstarted",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_START_SET_START":return g;case"GAME_START_SET_STOP":return"stop";case"GAME_START_FLAG_RESET":return"notstarted";default:return e}},x=function(){var e=j().player.timeStartPlay,t=j().player.timeEndPlay;t>e&&N().dispatch({type:"PLAYER_SET_TIME_SCORE",payload:t-e})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",winnerFlag:null,timeStartPlay:0,timeEndPlay:0,timeScore:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAYER_NAME_SET":return Object(A.a)({},e,{name:t.payload});case"PLAYER_SET_WINNER_FLAG_TRUE":return Object(A.a)({},e,{winnerFlag:!0});case"PLAYER_SET_WINNER_FLAG_FALSE":return Object(A.a)({},e,{winnerFlag:!1});case"PLAYER_SET_TIME_START_PLAY":return Object(A.a)({},e,{timeStartPlay:(new Date).getTime()});case"PLAYER_SET_TIME_END_PLAY":return Object(A.a)({},e,{timeEndPlay:(new Date).getTime()});case"PLAYER_SET_TIME_SCORE":return Object(A.a)({},e,{timeScore:t.payload});case"PLAYER_RESET_GAME":return Object(A.a)({},e,{winnerFlag:null,timeStartPlay:0,timeEndPlay:0,timeScore:null});case"PLAYER_RESET_ALL":return{name:"",winnerFlag:null,timeStartPlay:0,timeEndPlay:0,timeScore:null};default:return Object(A.a)({},e)}},P=function(){N().dispatch({type:"BOARD_FIELD_COUNTER_INCREMENT"})},M=function(e){N().dispatch({type:"SET_BOARD_FIELDS",payload:e})},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fields:[],fieldCounter:0,playerScore:0,pcScore:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARD_FIELDS":return Object(A.a)({},e,{fields:t.payload});case"BOARD_FIELD_COUNTER_INCREMENT":return Object(A.a)({},e,{fieldCounter:e.fieldCounter+1});case"BOARD_PLAYER_SCORE_INCREMENT":return Object(A.a)({},e,{playerScore:e.playerScore+1});case"BOARD_PC_SCORE_INCREMENT":return Object(A.a)({},e,{pcScore:e.pcScore+1});case"BOARD_RESET":return{fields:[],fieldCounter:0,playerScore:0,pcScore:0};default:return Object(A.a)({},e)}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WINNERS_LIST_SET_LIST":return t.payload;default:return e}},k=function(e){var t,a=j().gameStartFlag,n=j().gameDificulty.dificultiesList,r=e.target.value,c=Object(A.a)({},n[e.target.value],{name:r});"notstarted"===a&&(t=c,N().dispatch({type:"GAME_DIFICULTY_CHOOSE",payload:t}))},B=a(14),W=a.n(B),U=a(34),H=a.n(U),q=function(e){var t;"notstarted"===j().gameStartFlag&&(t=e.target.value,N().dispatch({type:"PLAYER_NAME_SET",payload:t}))},J=function(e){return function(t){t.preventDefault();var a=j().gameStartFlag;e&&N().dispatch({type:"GAME_START_SET_START"}),a!==g&&"stop"!==a||(N().dispatch({type:"GAME_START_FLAG_RESET"}),N().dispatch({type:"BOARD_RESET"}),N().dispatch({type:"PLAYER_RESET_GAME"}))}},$=a(162),z=a(117),Z=a(163),K=a(120),Q=a(113),V=a(116),X=a(158),ee=Object(s.a)((function(e){return{form:{display:"flex",alignItems:"center",justifyContent:"center"},formControl:{margin:e.spacing(1)},selectDificulty:{width:180},playerNameInput:{width:180},"@media (max-width: 599px)":{form:{flexDirection:"column",alignItems:"center"},selectDificulty:{width:250},playerNameInput:{width:250}}}})),te=Object(f.b)((function(e){return{gameDificulty:e.gameDificulty,player:e.player,gameStartFlag:e.gameStartFlag}}))(r.a.memo((function(e){var t=e.gameDificulty,a=t.dificultiesList,n=t.dificultySelected,c=e.player,i=e.gameStartFlag,l=ee(),o=c.name.length>3&&""!==n&&!b(n),u="notstarted"!==i;r.a.useEffect((function(){!function(e){var t;W.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.awrap(H()("https://starnavi-frontend-test-task.herokuapp.com/game-settings"));case 3:t=e.sent,a=t.data,N().dispatch({type:"GAME_DIFICULTY_LIST_SET",payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}var a}),null,null,[[0,7]])}()}),[]);var s=Object.keys(a);return r.a.createElement($.a,null,b(a)?null:r.a.createElement("form",{className:l.form,onSubmit:J(o)},r.a.createElement(Q.a,{disabled:u,required:!0,className:l.formControl},r.a.createElement(K.a,{id:"dificulty-select-label"},"Select Dificulty"),r.a.createElement(z.a,{labelId:"dificulty-select-label",id:"dificulty-select",className:l.selectDificulty,value:n.name,onChange:k},s.map((function(e){return r.a.createElement(Z.a,{key:e,value:e},(t=e).charAt(0).toUpperCase()+t.substring(1).replace(/([a-z])([A-Z])/,"$1 $2"));var t}))),r.a.createElement(V.a,null,"choose dificulty")),r.a.createElement(X.a,{className:l.playerNameInput,label:"Player Name",onChange:q,value:c.name,required:!0,disabled:u,helperText:"must be at least 4 characters",inputProps:{minLength:4,maxLength:20}}),r.a.createElement(Q.a,{className:l.formControl},r.a.createElement(_,{isSubmitEnabled:o}))))}))),ae=Object(s.a)((function(e){return{root:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:30,marginBottom:30},text:{}}})),ne=Object(f.b)((function(e){return{gameStartFlag:e.gameStartFlag,winnerFlag:e.player.winnerFlag}}))(r.a.memo((function(e){var t=e.gameStartFlag,a=e.winnerFlag,n=ae(),c=j().player.name,i="",l="";switch(!0===a?l="Player ".concat(c," is winner!"):!1===a&&(l="Player ".concat(c," loose.")),t){case"notstarted":i="Welcome to our Game!";break;case g:i="Press on blue squares.";break;case"stop":i=l;break;default:i=""}return r.a.createElement($.a,{className:n.root},r.a.createElement(u.a,{className:n.text,variant:"h5"},i))}))),re=function(e,t){var a=j().board.fields.map((function(a){return a.id===e&&"success"!==a.status&&(a.status=t),a}));M(a)},ce=function(){for(var e=j().gameDificulty.dificultySelected.field,t=e*e,a=[],n=0;n<t;n++)a.push({id:n,status:"inactive",catch:null});M(function(e){for(var t=Object(v.a)(e),a=t.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),r=[t[n],t[a]];t[a]=r[0],t[n]=r[1]}return t}(a))},ie=function(e){return function(){var t=j().board,a=t.fieldCounter,n=t.fields,r=j().gameStartFlag;if(a===e&&r===g){var c=n.map((function(t){return t.id===e&&(t.status="success"),t}));M(c),P(),N().dispatch({type:"BOARD_PLAYER_SCORE_INCREMENT"})}}},le=a(21),oe=a.n(le),ue=Object(s.a)((function(e){return{td:{borderLeft:"1px solid ".concat(oe.a[700]),borderTop:"1px solid ".concat(oe.a[700])}}})),se=a(63),me=a.n(se),de=a(64),fe=a.n(de),pe=a(65),Ee=a.n(pe);function ge(e){var t=e.id,a=e.status,n=ue();return r.a.createElement($.a,{style:{backgroundColor:function(){switch(a){case"active":return me.a[500];case"success":return fe.a[500];case"fail":return Ee.a[500];case"inactive":default:return"white"}}()},className:n.td,onClick:ie(t)})}var ye=function(){var e;return W.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.a.awrap(H()("https://starnavi-frontend-test-task.herokuapp.com/winners"));case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),console.error("error",t.t0);case 10:case"end":return t.stop()}}),null,null,[[0,7]])},Se=function(){var e;return W.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.a.awrap(ye());case 2:(e=t.sent).reverse(),a=e,N().dispatch({type:"WINNERS_LIST_SET_LIST",payload:a});case 5:case"end":return t.stop()}var a}))},he=function(e,t){return W.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W.a.awrap(H.a.post("https://starnavi-frontend-test-task.herokuapp.com/winners",{winner:e,date:t}));case 3:Se(),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log("cant send data to server ",a.t0);case 9:case"end":return a.stop()}}),null,null,[[0,6]])},_e=function(){var e,t,a,n;return W.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e=j().player,t=e.name,a=e.winnerFlag,n=R(),!0===a&&he(t,n),!1===a&&he("Computer",n);case 4:case"end":return r.stop()}}))},ve=function(){I(),N().dispatch({type:"PLAYER_SET_TIME_END_PLAY"}),N().dispatch({type:"PLAYER_SET_WINNER_FLAG_TRUE"}),x(),_e()},be=function(){I(),N().dispatch({type:"PLAYER_SET_WINNER_FLAG_FALSE"}),_e()},Te=Object(f.b)((function(e){return{dificultySelected:e.gameDificulty.dificultySelected,gameStartFlag:e.gameStartFlag,fields:e.board.fields,fieldCounter:e.board.fieldCounter}}))((function(e){var t=e.gameStartFlag,a=e.fields,n=e.fieldCounter,c=function(){var e=j().gameDificulty.dificultySelected.field;return Object(s.a)((function(t){return{root:{margin:"auto",width:450,height:450},board:{display:"grid",gridTemplateColumns:"repeat(".concat(e,", 1fr)"),justifyContent:"center",gridTemplateRows:"repeat(".concat(e,", ").concat(450/e,"px)"),alignItems:"stretch",borderBottom:"1px solid ".concat(oe.a[700]),borderRight:"1px solid ".concat(oe.a[700])},"@media (max-width: 490px)":{root:{width:360,height:360},board:{gridTemplateRows:"repeat(".concat(e,", ").concat(360/e,"px)")}}}}))}()(),i=j().gameDificulty.dificultySelected,l=j().board,o=l.playerScore,u=l.pcScore,m=j().player.timeScore,d=a.length,f=i.delay;r.a.useEffect((function(){b(i)||"notstarted"!==t||ce()}),[i,t]),r.a.useEffect((function(){t===g&&N().dispatch({type:"PLAYER_SET_TIME_START_PLAY"})}),[t]),r.a.useEffect((function(){var e,a=Math.ceil(d/2);return t===g&&(o>a&&a>0?ve():u>a&&a>0?(be(),re(n,"inactive")):n<=d&&(re(n,"active"),e=setInterval((function(){re(n,"fail"),P(),N().dispatch({type:"BOARD_PC_SCORE_INCREMENT"})}),f||2e3))),function(){clearInterval(e)}}),[f,n,d,t,u,o,m]);for(var p=[],E=0;E<a.length;E++)p.push(r.a.createElement(ge,{key:a[E].id,id:a[E].id,status:a[E].status,fieldCounter:n}));return r.a.createElement($.a,{className:c.root},r.a.createElement($.a,{className:c.board},p))}));var Re=function(){return r.a.createElement($.a,null,r.a.createElement(te,null),r.a.createElement(ne,null),r.a.createElement(Te,null))},Ae=Object(s.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid ".concat(oe.a[300]),marginTop:10}}})),Oe=r.a.memo((function(e){var t=e.name,a=e.date,n=Ae();return r.a.createElement($.a,{className:n.root},r.a.createElement(u.a,{variant:"subtitle2"},t),r.a.createElement(u.a,{variant:"subtitle2"},a))})),we=Object(s.a)((function(e){return{root:{},title:{textAlign:"center",marginBottom:15},listWrapper:{overflowY:"auto",height:500,maxWidth:500,margin:"0 auto",paddingRight:10},"@media (max-width: 960px)":{listWrapper:{height:200}}}})),Le=Object(f.b)((function(e){return{gameStartFlag:e.gameStartFlag,winnersList:e.winnersList}}))(r.a.memo((function(e){var t=e.gameStartFlag,a=e.winnersList,n=we();return r.a.useEffect((function(){Se()}),[t]),r.a.createElement($.a,{className:n.root},r.a.createElement(u.a,{className:n.title,variant:"h4"},"Winner Board"),r.a.createElement($.a,{className:n.listWrapper},a.map((function(e){return r.a.createElement(Oe,{key:e.id,name:e.winner,date:e.date})}))))}))),Ne=Object(s.a)((function(e){return{root:{margin:15}}})),je=r.a.memo((function(){var e=Ne();return r.a.createElement($.a,{className:e.root},r.a.createElement(Le,null))})),Ce=a(159),Ie=a(160),Fe=Object(s.a)((function(e){return{root:{height:"100%",marginTop:20}}}));var xe=function(){var e=Fe();return r.a.createElement(Ce.a,{className:e.root},r.a.createElement(Ie.a,{container:!0},r.a.createElement(Ie.a,{item:!0,xs:12,md:8},r.a.createElement(Re,null)),r.a.createElement(Ie.a,{item:!0,xs:12,md:4},r.a.createElement(je,null))))},De=Object(s.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:36,backgroundColor:oe.a[300]},toolBar:{justifyContent:"center",textTransform:"uppercase"}}})),Pe=r.a.memo((function(){var e=De(),t=(new Date).getFullYear();return r.a.createElement($.a,{className:e.root},r.a.createElement(u.a,{variant:"subtitle1"},"\xa9",t))})),Me=a(161),Ye=(a(109),Object(s.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"},gameWrapper:{flexGrow:1}}})));a(110);var Ge=function(){var e=Ye();return r.a.createElement($.a,{className:e.root},r.a.createElement(Me.a,null),r.a.createElement(d,null),r.a.createElement($.a,{className:e.gameWrapper},r.a.createElement(xe,null)),r.a.createElement(Pe,null))};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=Object(O.c)(e),n=Object(O.a)(w.a,t||function(e){return function(e){return function(t){return e(t)}}});L=Object(O.d)(a,void 0,n)}({gameDificulty:C,gameStartFlag:F,player:D,board:Y,winnersList:G}),i.a.render(r.a.createElement((function(e){var t=e.children;return r.a.createElement(f.a,{store:N()},t)}),null,r.a.createElement(Ge,null)),document.getElementById("root"))},80:function(e,t,a){e.exports=a(111)}},[[80,1,2]]]);
//# sourceMappingURL=main.0887e09f.chunk.js.map